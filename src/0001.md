# 目录

1. 生命周期
2. forceUpdate

# 生命周期

``` js
shouldComponentUpdate(nextProps, nextState)
```
- this.props（这次传入） 与 nextProps（马上要传入的--更新之前） 以及 this.state（当前组件本次） 与nextState（当前组件下次--更新之前） 进行比较

- React 可能会将 shouldComponentUpdate 视为提示而不是严格的指令，并且，当返回 false 时，仍可能导致组件重新渲染。

图谱：https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/

官网解释：https://react.docschina.org/docs/react-component.html#shouldcomponentupdate



# forceUpdate

forceUpdate 可以简单的理解为 this.setState({})，只不过这个setState 是不调用自己的“shouldComponentUpdate”声明周期的。


如果 render() 方法从 this.props 或者 this.state 之外的地方读取数据，你需要通过调用 forceUpdate() 告诉 React 什么时候需要再次运行 render()。如果直接改变了 this.state，也需要调用 forceUpdate()。

``` js
class A extends React.Component{
	
	handleClick = () => {
		this.forceUpdate()
		this.forceUpdate()
		this.forceUpdate()
		this.forceUpdate()
	}
	
	shouldComponentUpdate() {
		return false
	}
	
	render() {
		return (
			<div onClick={this.handleClick}>
				<Son/> // 一个组件
			</div>
		)
	}
}
```

1. forceUpdate在批量与否的表现上，和setState是一样的。在React有控制权的函数里，是批量的。

2. forceUpdate只会强制本身组件的更新，即不调用“shouldComponentUpdate”直接更新，对于子孙后代组件还是要调用自己的“shouldComponentUpdate”来决定的